# Phase 4 å®Ÿè£…ä»•æ§˜æ›¸

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: LlmMultiChat3  
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 4 - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£… + è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ æ‹¡å¼µ  
**æœŸé–“**: 8é€±é–“ï¼ˆ2éƒ¨æ§‹æˆï¼‰  
**ä½œæˆæ—¥**: 2025-11-20  
**Phase 1-3çµ±åˆå®Œäº†**: å®Ÿæ–½ä¸­

---

## ç›®æ¬¡

1. [Phase 4æ¦‚è¦](#1-phase-4æ¦‚è¦)
2. [å‰ææ¡ä»¶](#2-å‰ææ¡ä»¶)
3. [Part A: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ï¼ˆWeek 1-4ï¼‰](#3-part-a-ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…week-1-4)
4. [Part B: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é«˜åº¦æ©Ÿèƒ½ï¼ˆWeek 5-8ï¼‰](#4-part-b-ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é«˜åº¦æ©Ÿèƒ½week-5-8)
5. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#5-æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
6. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ](#6-ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ)
7. [ãƒ†ã‚¹ãƒˆè¨ˆç”»ï¼ˆTDDå®Ÿè£…ï¼‰](#7-ãƒ†ã‚¹ãƒˆè¨ˆç”»tddå®Ÿè£…)
   - [Part A: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£… - ãƒ†ã‚¹ãƒˆä»•æ§˜ï¼ˆTDDï¼‰](#part-a-ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…---ãƒ†ã‚¹ãƒˆä»•æ§˜tdd)
   - [Part B: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é«˜åº¦æ©Ÿèƒ½ - ãƒ†ã‚¹ãƒˆä»•æ§˜ï¼ˆTDDï¼‰](#part-b-ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é«˜åº¦æ©Ÿèƒ½---ãƒ†ã‚¹ãƒˆä»•æ§˜tdd)
   - [ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ä»•æ§˜](#ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ä»•æ§˜)
   - [ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæˆ¦ç•¥](#ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæˆ¦ç•¥)
8. [ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥](#8-ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥)
9. [Phase 4æˆåŠŸåŸºæº–](#9-phase-4æˆåŠŸåŸºæº–)

---

## 1. Phase 4æ¦‚è¦

### 1.1 ç›®çš„

Phase 4ã¯**2ã¤ã®ãƒ‘ãƒ¼ãƒˆ**ã«åˆ†ã‹ã‚Œã¦ã„ã¾ã™ï¼š

**Part Aï¼ˆWeek 1-4ï¼‰**: Phase 1-3çµ±åˆå¾Œã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…
- React SPA + WebSocket UIã®æ§‹ç¯‰
- JWTèªè¨¼ãƒ•ãƒ­ãƒ¼ãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¼šè©±UIãƒ»è¨˜æ†¶ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

**Part Bï¼ˆWeek 5-8ï¼‰**: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é«˜åº¦æ©Ÿèƒ½ã®è¿½åŠ 
- é€£æƒ³è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ ï¼ˆSQLite Graphï¼‰
- 8åŸºæœ¬æ„Ÿæƒ…ãƒ¢ãƒ‡ãƒ«ï¼ˆPlutchikï¼‰

### 1.2 TDDå®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

Phase 4ã¯**ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰**ã§å®Ÿè£…ã—ã¾ã™ã€‚å„æ©Ÿèƒ½ã¯ä»¥ä¸‹ã®ã‚µã‚¤ã‚¯ãƒ«ã§é–‹ç™ºã—ã¾ã™ï¼š

```
1. ğŸ”´ RED: ãƒ†ã‚¹ãƒˆã‚’æ›¸ãï¼ˆå¤±æ•—ã™ã‚‹ï¼‰
2. ğŸŸ¢ GREEN: æœ€å°é™ã®å®Ÿè£…ã§ãƒ†ã‚¹ãƒˆã‚’é€šã™
3. ğŸ”µ REFACTOR: ã‚³ãƒ¼ãƒ‰ã‚’ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆãƒ†ã‚¹ãƒˆã¯å¸¸ã«æˆåŠŸï¼‰
```

**TDDã®åŸå‰‡**:
- âœ… å®Ÿè£…å‰ã«å¿…ãšãƒ†ã‚¹ãƒˆã‚’æ›¸ã
- âœ… 1ã¤ã®ãƒ†ã‚¹ãƒˆ â†’ 1ã¤ã®å®Ÿè£… â†’ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®ã‚µã‚¤ã‚¯ãƒ«
- âœ… Given-When-Thenå½¢å¼ã§ãƒ†ã‚¹ãƒˆã‚’è¨˜è¿°
- âœ… å„ãƒ†ã‚¹ãƒˆã¯ç‹¬ç«‹ã—ã¦å®Ÿè¡Œå¯èƒ½
- âœ… å¤–éƒ¨ä¾å­˜ã¯ãƒ¢ãƒƒã‚¯ã§åˆ†é›¢

### 1.2 å…¨ä½“ç›®æ¨™

| ã‚«ãƒ†ã‚´ãƒª | ç›®æ¨™ | Priority |
|---------|------|----------|
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | React SPAå®Œå…¨å®Ÿè£… | ğŸ”´ High |
| **èªè¨¼UI** | JWTèªè¨¼ãƒ•ãƒ­ãƒ¼ | ğŸ”´ High |
| **ä¼šè©±UI** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆ | ğŸ”´ High |
| **è¨˜æ†¶æ‹¡å¼µ** | é€£æƒ³è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ  | ğŸŸ¡ Medium |
| **æ„Ÿæƒ…åŸºç›¤** | 8åŸºæœ¬æ„Ÿæƒ…ãƒ¢ãƒ‡ãƒ« | ğŸŸ¡ Medium |

### 1.3 æˆæœç‰©

**ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆPart Aï¼‰**:
- React SPAï¼ˆç´„3,000è¡Œ TypeScriptï¼‰
- 15ç”»é¢ãƒ»30ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- E2Eãƒ†ã‚¹ãƒˆï¼ˆCypressï¼‰

**ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆPart Bï¼‰**:
- é€£æƒ³è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ400è¡Œ Pythonï¼‰
- æ„Ÿæƒ…ãƒ¢ãƒ‡ãƒ«ï¼ˆ300è¡Œ Pythonï¼‰
- 35çµ±åˆãƒ†ã‚¹ãƒˆ

---

## 2. å‰ææ¡ä»¶

### 2.1 Phase 1-3çµ±åˆå®Œäº†

âœ… Phase 1: LangGraphã‚³ã‚¢ãƒ»5éšå±¤è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ   
âœ… Phase 2: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£  
âœ… Phase 3: REST/WebSocket APIï¼ˆ23ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰  
âœ… **Phase 1-3çµ±åˆ**: [`services/chat_service.py`](../../services/chat_service.py:1), [`services/memory_service.py`](../../services/memory_service.py:1)

### 2.2 åˆ©ç”¨å¯èƒ½ãªAPI

**èªè¨¼APIï¼ˆ6ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰**:
- `POST /api/v1/auth/register`
- `POST /api/v1/auth/login`
- `POST /api/v1/auth/refresh`
- `GET /api/v1/auth/profile`
- `POST /api/v1/auth/change-password`
- `DELETE /api/v1/auth/delete`

**ä¼šè©±APIï¼ˆ6ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰**:
- `POST /api/v1/chat/`
- `POST /api/v1/chat/stream`
- `GET /api/v1/chat/history`
- `GET /api/v1/chat/sessions`
- `GET /api/v1/chat/sessions/{session_id}`
- `DELETE /api/v1/chat/sessions/{session_id}/clear`

**è¨˜æ†¶APIï¼ˆ7ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰**:
- `POST /api/v1/memory/search`
- `POST /api/v1/memory/store`
- `DELETE /api/v1/memory/delete/{memory_id}`
- `GET /api/v1/memory/stats`
- `GET /api/v1/memory/sessions/{session_id}`
- `POST /api/v1/memory/flush` (admin)
- `GET /api/v1/memory/health`

**WebSocket API**:
- `WS /ws/chat`

---

## 3. Part A: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ï¼ˆWeek 1-4ï¼‰

### 3.1 Week 1: ReactåŸºç›¤ãƒ»èªè¨¼UI

#### 3.1.1 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
frontend/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ manifest.json
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ common/          # Button, Input, Card, Loading
â”‚   â”‚   â”œâ”€â”€ layout/          # Header, Sidebar, Footer
â”‚   â”‚   â””â”€â”€ auth/            # LoginForm, RegisterForm, ProfileCard
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ LoginPage.tsx
â”‚   â”‚   â”œâ”€â”€ RegisterPage.tsx
â”‚   â”‚   â”œâ”€â”€ ChatPage.tsx
â”‚   â”‚   â””â”€â”€ DashboardPage.tsx
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ api.ts           # Axios client
â”‚   â”‚   â”œâ”€â”€ auth.service.ts  # èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚   â”œâ”€â”€ chat.service.ts  # ä¼šè©±ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚   â””â”€â”€ websocket.service.ts # WebSocketã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”œâ”€â”€ authSlice.ts     # Reduxèªè¨¼ã‚¹ãƒ©ã‚¤ã‚¹
â”‚   â”‚   â”œâ”€â”€ chatSlice.ts     # Reduxä¼šè©±ã‚¹ãƒ©ã‚¤ã‚¹
â”‚   â”‚   â””â”€â”€ store.ts         # Redux Store
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”œâ”€â”€ useWebSocket.ts
â”‚   â”‚   â””â”€â”€ useChat.ts
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ auth.types.ts
â”‚   â”‚   â”œâ”€â”€ chat.types.ts
â”‚   â”‚   â””â”€â”€ memory.types.ts
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ localStorage.ts
â”‚   â”‚   â””â”€â”€ formatters.ts
â”‚   â”œâ”€â”€ App.tsx
â”‚   â””â”€â”€ index.tsx
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts
```

#### 3.1.2 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆpackage.jsonï¼‰

```json
{
  "name": "llmmultichat3-frontend",
  "version": "4.0.0",
  "type": "module",
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.20.0",
    "@reduxjs/toolkit": "^2.0.0",
    "react-redux": "^9.0.0",
    "axios": "^1.6.0",
    "@tanstack/react-query": "^5.10.0",
    "socket.io-client": "^4.6.0",
    "recharts": "^2.10.0",
    "react-markdown": "^9.0.0",
    "lucide-react": "^0.292.0",
    "tailwindcss": "^3.3.0",
    "clsx": "^2.0.0"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^4.2.0",
    "typescript": "^5.3.0",
    "vite": "^5.0.0",
    "vitest": "^1.0.0",
    "cypress": "^13.6.0",
    "@testing-library/react": "^14.1.0"
  }
}
```

#### 3.1.3 ä¸»è¦å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

**1. API Clientï¼ˆ150è¡Œï¼‰**

```typescript
// src/services/api.ts
import axios, { AxiosInstance } from 'axios';

const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000';

class ApiClient {
  private client: AxiosInstance;

  constructor() {
    this.client = axios.create({
      baseURL: API_BASE_URL,
      timeout: 30000,
      headers: { 'Content-Type': 'application/json' },
    });

    // ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼ï¼ˆJWTè‡ªå‹•ä»˜ä¸ï¼‰
    this.client.interceptors.request.use(
      (config) => {
        const token = localStorage.getItem('access_token');
        if (token) config.headers.Authorization = `Bearer ${token}`;
        return config;
      }
    );

    // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³è‡ªå‹•æ›´æ–°ï¼‰
    this.client.interceptors.response.use(
      (response) => response,
      async (error) => {
        const originalRequest = error.config;
        if (error.response?.status === 401 && !originalRequest._retry) {
          originalRequest._retry = true;
          const refreshToken = localStorage.getItem('refresh_token');
          if (refreshToken) {
            const { data } = await this.client.post('/api/v1/auth/refresh', { refresh_token: refreshToken });
            localStorage.setItem('access_token', data.access_token);
            originalRequest.headers.Authorization = `Bearer ${data.access_token}`;
            return this.client(originalRequest);
          }
        }
        return Promise.reject(error);
      }
    );
  }

  get client() { return this.client; }
}

export const apiClient = new ApiClient().client;
```

**2. èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆ300è¡Œï¼‰**

```typescript
// src/services/auth.service.ts
import { apiClient } from './api';
import { LoginCredentials, RegisterData, User } from '../types/auth.types';

export class AuthService {
  async register(data: RegisterData): Promise<{ user_id: string }> {
    const response = await apiClient.post('/api/v1/auth/register', data);
    return response.data;
  }

  async login(credentials: LoginCredentials): Promise<{
    access_token: string;
    refresh_token: string;
  }> {
    const response = await apiClient.post('/api/v1/auth/login', credentials);
    const { access_token, refresh_token } = response.data;
    localStorage.setItem('access_token', access_token);
    localStorage.setItem('refresh_token', refresh_token);
    return response.data;
  }

  async logout(): Promise<void> {
    localStorage.removeItem('access_token');
    localStorage.removeItem('refresh_token');
  }

  async getProfile(): Promise<User> {
    const response = await apiClient.get('/api/v1/auth/profile');
    return response.data;
  }

  isAuthenticated(): boolean {
    return !!localStorage.getItem('access_token');
  }
}

export const authService = new AuthService();
```

**3. Redux Auth Sliceï¼ˆ250è¡Œï¼‰**

```typescript
// src/store/authSlice.ts
import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';
import { authService } from '../services/auth.service';
import { User, LoginCredentials } from '../types/auth.types';

interface AuthState {
  user: User | null;
  isAuthenticated: boolean;
  isLoading: boolean;
  error: string | null;
}

export const loginAsync = createAsyncThunk(
  'auth/login',
  async (credentials: LoginCredentials, { rejectWithValue }) => {
    try {
      await authService.login(credentials);
      return await authService.getProfile();
    } catch (error: any) {
      return rejectWithValue(error.response?.data?.detail || 'Login failed');
    }
  }
);

const authSlice = createSlice({
  name: 'auth',
  initialState: {
    user: null,
    isAuthenticated: authService.isAuthenticated(),
    isLoading: false,
    error: null,
  } as AuthState,
  reducers: {
    logout: (state) => {
      authService.logout();
      state.user = null;
      state.isAuthenticated = false;
    },
  },
  extraReducers: (builder) => {
    builder
      .addCase(loginAsync.fulfilled, (state, action) => {
        state.isAuthenticated = true;
        state.user = action.payload;
      });
  },
});

export const { logout } = authSlice.actions;
export default authSlice.reducer;
```

### 3.2 Week 2: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¼šè©±UI

#### 3.2.1 WebSocketã‚µãƒ¼ãƒ“ã‚¹ï¼ˆ400è¡Œï¼‰

```typescript
// src/services/websocket.service.ts
import { io, Socket } from 'socket.io-client';

export class WebSocketService {
  private socket: Socket | null = null;
  private messageHandlers: ((message: any) => void)[] = [];

  connect(token: string): void {
    this.socket = io('ws://localhost:8000', {
      path: '/ws/chat',
      auth: { token },
      transports: ['websocket'],
    });

    this.socket.on('message', (data) => {
      this.messageHandlers.forEach((handler) => handler(data));
    });
  }

  disconnect(): void {
    if (this.socket) {
      this.socket.disconnect();
      this.socket = null;
    }
  }

  sendMessage(message: string, sessionId: string): void {
    if (this.socket) {
      this.socket.emit('chat', {
        type: 'chat',
        user_input: message,
        session_id: sessionId,
      });
    }
  }

  onMessage(handler: (message: any) => void): void {
    this.messageHandlers.push(handler);
  }
}

export const websocketService = new WebSocketService();
```

#### 3.2.2 ãƒãƒ£ãƒƒãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼ˆ500è¡Œï¼‰

```typescript
// src/components/chat/ChatWindow.tsx
import React, { useEffect, useState } from 'react';
import { useDispatch } from 'react-redux';
import { websocketService } from '../../services/websocket.service';
import { addMessage } from '../../store/chatSlice';
import { MessageList } from './MessageList';
import { MessageInput } from './MessageInput';

export const ChatWindow: React.FC = () => {
  const dispatch = useDispatch();
  const [isTyping, setIsTyping] = useState(false);

  useEffect(() => {
    const handleMessage = (data: any) => {
      if (data.type === 'chunk') {
        setIsTyping(true);
        dispatch(addMessage({
          id: Date.now().toString(),
          content: data.content,
          role: 'assistant',
          timestamp: new Date().toISOString(),
        }));
        setTimeout(() => setIsTyping(false), 1000);
      }
    };

    websocketService.onMessage(handleMessage);
    return () => { /* cleanup */ };
  }, [dispatch]);

  const handleSendMessage = (content: string) => {
    dispatch(addMessage({
      id: Date.now().toString(),
      content,
      role: 'user',
      timestamp: new Date().toISOString(),
    }));
    websocketService.sendMessage(content, 'session-001');
  };

  return (
    <div className="flex flex-col h-screen">
      <div className="flex-1 overflow-y-auto p-4">
        <MessageList messages={[]} />
        {isTyping && <div>å…¥åŠ›ä¸­...</div>}
      </div>
      <MessageInput onSend={handleSendMessage} />
    </div>
  );
};
```

### 3.3 Week 3: è¨˜æ†¶ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

#### 3.3.1 è¨˜æ†¶çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆ400è¡Œï¼‰

```typescript
// src/components/dashboard/MemoryDashboard.tsx
import React, { useEffect, useState } from 'react';
import { apiClient } from '../../services/api';
import { BarChart, Bar, XAxis, YAxis, Tooltip } from 'recharts';

export const MemoryDashboard: React.FC = () => {
  const [stats, setStats] = useState<any>(null);

  useEffect(() => {
    const fetchStats = async () => {
      const response = await apiClient.get('/api/v1/memory/stats');
      setStats(response.data);
    };
    fetchStats();
  }, []);

  if (!stats) return <div>Loading...</div>;

  return (
    <div className="p-4">
      <h2 className="text-2xl font-bold mb-4">è¨˜æ†¶çµ±è¨ˆ</h2>
      <div className="grid grid-cols-2 gap-4">
        <div className="bg-white p-4 rounded shadow">
          <h3>ç·è¨˜æ†¶æ•°</h3>
          <p className="text-3xl">{stats.total_memories}</p>
        </div>
        <div className="bg-white p-4 rounded shadow">
          <h3>éšå±¤åˆ¥è¨˜æ†¶</h3>
          <BarChart width={300} height={200} data={Object.entries(stats.by_layer).map(([k, v]) => ({ name: k, value: v }))}>
            <XAxis dataKey="name" />
            <YAxis />
            <Tooltip />
            <Bar dataKey="value" fill="#0ea5e9" />
          </BarChart>
        </div>
      </div>
    </div>
  );
};
```

### 3.4 Week 4: çµ±åˆãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤

#### 3.4.1 E2Eãƒ†ã‚¹ãƒˆï¼ˆCypressï¼‰

```typescript
// cypress/e2e/auth.cy.ts
describe('èªè¨¼ãƒ•ãƒ­ãƒ¼', () => {
  it('ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ', () => {
    cy.visit('/login');
    cy.get('input[type="email"]').type('test@example.com');
    cy.get('input[type="password"]').type('password123');
    cy.get('button[type="submit"]').click();
    cy.url().should('include', '/chat');
  });

  it('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ', () => {
    cy.visit('/chat');
    cy.get('[data-testid="logout-button"]').click();
    cy.url().should('include', '/login');
  });
});
```

```typescript
// cypress/e2e/chat.cy.ts
describe('ä¼šè©±ãƒ•ãƒ­ãƒ¼', () => {
  beforeEach(() => {
    cy.login('test@example.com', 'password123');
  });

  it('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡', () => {
    cy.visit('/chat');
    cy.get('[data-testid="message-input"]').type('ã“ã‚“ã«ã¡ã¯');
    cy.get('[data-testid="send-button"]').click();
    cy.contains('ã“ã‚“ã«ã¡ã¯').should('be.visible');
  });
});
```

#### 3.4.2 Dockerãƒ‡ãƒ—ãƒ­ã‚¤

```dockerfile
# Dockerfile.frontend
FROM node:18-alpine AS build
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=build /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

```yaml
# docker-compose.yml
version: '3.8'
services:
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile.frontend
    ports:
      - "3000:80"
    environment:
      - VITE_API_BASE_URL=http://localhost:8000
    depends_on:
      - backend

  backend:
    build: .
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/llm
      - REDIS_URL=redis://redis:6379
    depends_on:
      - db
      - redis
```

---

## 4. Part B: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é«˜åº¦æ©Ÿèƒ½ï¼ˆWeek 5-8ï¼‰

### 4.1 Week 5-6: é€£æƒ³è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ 

#### 4.1.1 å®Ÿè£…å†…å®¹

**å‚ç…§**: `docks/ä»•æ§˜æ›¸/05_ä¼šè©±LLM_é€£æƒ³è¨˜æ†¶ä»•æ§˜.md`

**ä¸»è¦æ©Ÿèƒ½**:
1. **SQLite Graphå®Ÿè£…**
   - ãƒãƒ¼ãƒ‰ç®¡ç†ï¼ˆæ¦‚å¿µãƒ»ãƒˆãƒ”ãƒƒã‚¯ãƒ»æ„Ÿæƒ…ï¼‰
   - ã‚¨ãƒƒã‚¸ç®¡ç†ï¼ˆé–¢é€£æ€§ãƒ»å¼·åº¦ï¼‰
   - å†å¸°CTEé€£æƒ³æ¤œç´¢

2. **å­¦ç¿’ãƒ¡ã‚«ãƒ‹ã‚ºãƒ **
   - ãƒ˜ãƒƒãƒ–ã®æ³•å‰‡ï¼ˆå…±èµ·å¼·åŒ–ï¼‰
   - æ™‚é–“çš„è¿‘æ¥æ€§å­¦ç¿’
   - æ„Ÿæƒ…çš„é–¢é€£å­¦ç¿’

3. **å¿˜å´æ›²ç·š**
   - æœªä½¿ç”¨è¨˜æ†¶ã®æ¸›è¡°
   - å¼±ã„é–¢é€£æ€§ã®è‡ªå‹•å‰Šé™¤

#### 4.1.2 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```python
# memory/associative.py (400è¡Œ)
class AssociativeMemory:
    """é€£æƒ³è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ ."""
    
    def __init__(self, db_path: str = "memory/associative.db"):
        self.db = SQLiteGraph(db_path)
    
    def add_concept(
        self,
        concept: str,
        embedding: List[float],
        metadata: Dict[str, Any]
    ) -> str:
        """æ¦‚å¿µè¿½åŠ ."""
        return self.db.create_node(
            label="concept",
            properties={
                "name": concept,
                "embedding": embedding,
                "metadata": metadata,
                "created_at": time.time(),
                "activation_count": 0
            }
        )
    
    def link_concepts(
        self,
        concept_a: str,
        concept_b: str,
        relationship_type: str,
        strength: float = 1.0
    ) -> str:
        """æ¦‚å¿µé–¢é€£ä»˜ã‘."""
        return self.db.create_relationship(
            from_node=concept_a,
            to_node=concept_b,
            rel_type=relationship_type,
            properties={"strength": strength, "co_occurrence": 1}
        )
    
    def retrieve_associated_concepts(
        self,
        trigger: str,
        depth: int = 3,
        threshold: float = 0.3
    ) -> List[Dict[str, Any]]:
        """é€£æƒ³æ¤œç´¢."""
        return self.db.find_associated_concepts(
            start_concept=trigger,
            depth=depth,
            threshold=threshold
        )
    
    def strengthen_association(
        self,
        concept_a: str,
        concept_b: str,
        delta: float = 0.1
    ) -> None:
        """ãƒ˜ãƒƒãƒ–ã®æ³•å‰‡: å…±èµ·å¼·åŒ–."""
        edge = self.db.get_edge(concept_a, concept_b)
        new_strength = min(edge['strength'] + delta, 10.0)
        self.db.update_edge(edge['id'], {"strength": new_strength})
    
    def decay_inactive_associations(
        self,
        days_threshold: int = 30,
        decay_rate: float = 0.1
    ) -> int:
        """å¿˜å´æ›²ç·šå‡¦ç†."""
        cutoff = time.time() - (days_threshold * 86400)
        inactive_edges = self.db.query("""
            SELECT id, strength FROM edges
            WHERE last_activated < ? AND strength > 0.1
        """, (cutoff,))
        
        for edge in inactive_edges:
            new_strength = max(edge['strength'] - decay_rate, 0.0)
            if new_strength < 0.1:
                self.db.delete_edge(edge['id'])
            else:
                self.db.update_edge(edge['id'], {"strength": new_strength})
        
        return len(inactive_edges)


class SQLiteGraph:
    """SQLite-based graph database."""
    
    def __init__(self, db_path: str):
        self.conn = sqlite3.connect(db_path)
        self._init_schema()
    
    def _init_schema(self):
        """ã‚¹ã‚­ãƒ¼ãƒåˆæœŸåŒ–."""
        self.conn.executescript("""
            CREATE TABLE IF NOT EXISTS nodes (
                id INTEGER PRIMARY KEY,
                name TEXT UNIQUE,
                type TEXT,
                metadata JSON,
                created_at INTEGER,
                activation_count INTEGER DEFAULT 0,
                emotional_valence REAL DEFAULT 0.0
            );
            
            CREATE TABLE IF NOT EXISTS edges (
                id INTEGER PRIMARY KEY,
                from_id INTEGER,
                to_id INTEGER,
                rel_type TEXT,
                strength REAL DEFAULT 1.0,
                co_occurrence INTEGER DEFAULT 1,
                last_activated INTEGER,
                FOREIGN KEY(from_id) REFERENCES nodes(id),
                FOREIGN KEY(to_id) REFERENCES nodes(id)
            );
            
            CREATE INDEX IF NOT EXISTS idx_nodes_name ON nodes(name);
            CREATE INDEX IF NOT EXISTS idx_edges_from ON edges(from_id);
            CREATE INDEX IF NOT EXISTS idx_edges_to ON edges(to_id);
        """)
    
    def find_associated_concepts(
        self,
        start_concept: str,
        depth: int,
        threshold: float
    ) -> List[Dict[str, Any]]:
        """å†å¸°CTEé€£æƒ³æ¤œç´¢."""
        query = """
            WITH RECURSIVE associated AS (
                -- ãƒ™ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
                SELECT n.id, n.name, n.type, 0 AS depth, 1.0 AS strength
                FROM nodes n
                WHERE n.name = ?
                
                UNION
                
                -- å†å¸°ã‚±ãƒ¼ã‚¹
                SELECT n.id, n.name, n.type, a.depth + 1, e.strength
                FROM associated a
                JOIN edges e ON a.id = e.from_id
                JOIN nodes n ON e.to_id = n.id
                WHERE a.depth < ? AND e.strength >= ?
            )
            SELECT DISTINCT name, type, depth, strength
            FROM associated
            ORDER BY depth, strength DESC
        """
        
        cursor = self.conn.execute(query, (start_concept, depth, threshold))
        return [dict(zip(['name', 'type', 'depth', 'strength'], row)) for row in cursor.fetchall()]
```

#### 4.1.3 APIè¿½åŠ 

```python
# api/routes/memory.py ã«è¿½åŠ 

from memory.associative import AssociativeMemory

associative_memory = AssociativeMemory()

@router.post("/api/v1/memory/associate")
async def create_association(
    concept_a: str,
    concept_b: str,
    strength: float = 1.0,
    current_user: User = Depends(get_current_user)
):
    """2ã¤ã®æ¦‚å¿µã‚’é–¢é€£ä»˜ã‘."""
    edge_id = associative_memory.link_concepts(
        concept_a=concept_a,
        concept_b=concept_b,
        relationship_type="semantic",
        strength=strength
    )
    return {"edge_id": edge_id, "status": "created"}

@router.get("/api/v1/memory/associations/{concept}")
async def get_associations(
    concept: str,
    depth: int = 3,
    threshold: float = 0.3,
    current_user: User = Depends(get_current_user)
):
    """é€£æƒ³æ¤œç´¢."""
    results = associative_memory.retrieve_associated_concepts(
        trigger=concept,
        depth=depth,
        threshold=threshold
    )
    return {"concept": concept, "associations": results, "count": len(results)}
```

#### 4.1.4 ãƒ†ã‚¹ãƒˆï¼ˆ20ä»¶ï¼‰

```python
# tests/test_associative_memory.py

def test_add_concept():
    """æ¦‚å¿µè¿½åŠ ãƒ†ã‚¹ãƒˆ."""
    memory = AssociativeMemory(":memory:")
    concept_id = memory.add_concept("Python", [0.1, 0.2], {"category": "programming"})
    assert concept_id is not None

def test_link_concepts():
    """é–¢é€£ä»˜ã‘ãƒ†ã‚¹ãƒˆ."""
    memory = AssociativeMemory(":memory:")
    memory.add_concept("Python", [0.1], {})
    memory.add_concept("AI", [0.2], {})
    edge_id = memory.link_concepts("Python", "AI", "used_for", 0.9)
    assert edge_id is not None

def test_retrieve_associated_concepts():
    """é€£æƒ³æ¤œç´¢ãƒ†ã‚¹ãƒˆ."""
    memory = AssociativeMemory(":memory:")
    memory.add_concept("Python", [0.1], {})
    memory.add_concept("AI", [0.2], {})
    memory.link_concepts("Python", "AI", "used_for", 0.9)
    results = memory.retrieve_associated_concepts("Python", depth=2, threshold=0.5)
    assert len(results) > 0
    assert any(r['name'] == 'AI' for r in results)

def test_strengthen_association():
    """é–¢é€£æ€§å¼·åŒ–ãƒ†ã‚¹ãƒˆï¼ˆãƒ˜ãƒƒãƒ–ã®æ³•å‰‡ï¼‰."""
    memory = AssociativeMemory(":memory:")
    memory.add_concept("A", [0.1], {})
    memory.add_concept("B", [0.2], {})
    memory.link_concepts("A", "B", "related", 0.5)
    memory.strengthen_association("A", "B", delta=0.2)
    # å¼·åº¦ãŒ0.7ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª

def test_decay_inactive_associations():
    """å¿˜å´å‡¦ç†ãƒ†ã‚¹ãƒˆ."""
    memory = AssociativeMemory(":memory:")
    memory.add_concept("Old", [0.1], {})
    memory.add_concept("Forgotten", [0.2], {})
    memory.link_concepts("Old", "Forgotten", "weak", 0.2)
    decayed = memory.decay_inactive_associations(days_threshold=1, decay_rate=0.3)
    assert decayed >= 0

# ... ä»–15ä»¶ï¼ˆã‚°ãƒ©ãƒ•æ¢ç´¢ã€æœ€çŸ­ãƒ‘ã‚¹ã€æ„Ÿæƒ…è¨˜æ†¶ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ç­‰ï¼‰
```

### 4.2 Week 7-8: æ„Ÿæƒ…ãƒ¢ãƒ‡ãƒ«åŸºç›¤

#### 4.2.1 å®Ÿè£…å†…å®¹

**å‚ç…§**: `docks/ä»•æ§˜æ›¸/04_ä¼šè©±LLM_æ„Ÿæƒ…ãƒ»å¯¾è©±ä»•æ§˜.md`

**ä¸»è¦æ©Ÿèƒ½**:
1. **8åŸºæœ¬æ„Ÿæƒ…ç®¡ç†**ï¼ˆPlutchikã®æ„Ÿæƒ…ã®è¼ªï¼‰
   - å–œã³ã€ä¿¡é ¼ã€æã‚Œã€é©šãã€æ‚²ã—ã¿ã€å«Œæ‚ªã€æ€’ã‚Šã€æœŸå¾…

2. **æ„Ÿæƒ…ã®è‡ªç„¶ãªæ¸›è¡°**
   - ãƒ›ãƒ¡ã‚ªã‚¹ã‚¿ã‚·ã‚¹ï¼ˆä¸­ç«‹å€¤0.5ã¸ï¼‰
   - æ™‚é–“çµŒéã«ã‚ˆã‚‹è‡ªå‹•æ¸›è¡°

3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼æ„Ÿæƒ…åˆ†æ**
   - sentiment analysisçµ±åˆ
   - å…±æ„Ÿçš„å¿œç­”ï¼ˆãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ï¼‰

#### 4.2.2 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```python
# core/emotion.py (300è¡Œ)
from typing import Dict, List
import time
from textblob import TextBlob

class EmotionalState:
    """ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ„Ÿæƒ…çŠ¶æ…‹ç®¡ç†."""
    
    EMOTIONS = ['joy', 'trust', 'fear', 'surprise', 'sadness', 'disgust', 'anger', 'anticipation']
    
    def __init__(self, character_name: str):
        self.character_name = character_name
        # å…¨æ„Ÿæƒ…ã‚’ä¸­ç«‹å€¤0.5ã§åˆæœŸåŒ–
        self.emotions: Dict[str, float] = {e: 0.5 for e in self.EMOTIONS}
        self.mood_history: List[Dict] = []
    
    def update_from_conversation(
        self,
        user_input: str,
        context: Dict
    ) -> None:
        """ä¼šè©±ã‹ã‚‰æ„Ÿæƒ…æ›´æ–°."""
        # ãƒ¦ãƒ¼ã‚¶ãƒ¼æ„Ÿæƒ…åˆ†æ
        user_sentiment = self._analyze_sentiment(user_input)
        
        # å…±æ„Ÿçš„å¿œç­”ï¼ˆãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ï¼‰
        if user_sentiment > 0.5:
            self.emotions['joy'] = min(self.emotions['joy'] + 0.1, 1.0)
            self.emotions['trust'] = min(self.emotions['trust'] + 0.05, 1.0)
        elif user_sentiment < -0.5:
            self.emotions['sadness'] = min(self.emotions['sadness'] + 0.1, 1.0)
        
        # å±¥æ­´è¨˜éŒ²
        self.mood_history.append({
            'timestamp': time.time(),
            'emotions': self.emotions.copy(),
            'dominant': self.get_dominant_emotion()
        })
        
        # è‡ªå‹•æ¸›è¡°
        self._decay_emotions(rate=0.05)
    
    def _analyze_sentiment(self, text: str) -> float:
        """ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æï¼ˆ-1.0 ~ 1.0ï¼‰."""
        blob = TextBlob(text)
        return blob.sentiment.polarity
    
    def _decay_emotions(self, rate: float = 0.05) -> None:
        """æ„Ÿæƒ…æ¸›è¡°ï¼ˆãƒ›ãƒ¡ã‚ªã‚¹ã‚¿ã‚·ã‚¹ï¼‰."""
        for emotion in self.emotions:
            if self.emotions[emotion] > 0.5:
                self.emotions[emotion] = max(self.emotions[emotion] - rate, 0.5)
            elif self.emotions[emotion] < 0.5:
                self.emotions[emotion] = min(self.emotions[emotion] + rate, 0.5)
    
    def get_dominant_emotion(self) -> str:
        """æ”¯é…çš„æ„Ÿæƒ…å–å¾—."""
        return max(self.emotions, key=self.emotions.get)
    
    def generate_emotional_modifier(self) -> str:
        """ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¿®é£¾å­ç”Ÿæˆ."""
        dominant = self.get_dominant_emotion()
        intensity = self.emotions[dominant] - 0.5  # 0.0 ~ 0.5
        
        if intensity > 0.3:
            return f"ï¼ˆç¾åœ¨ã€{dominant}ã®æ„Ÿæƒ…ãŒå¼·ã„çŠ¶æ…‹ã§ã™ï¼‰"
        elif intensity > 0.1:
            return f"ï¼ˆã‚„ã‚„{dominant}ãªæ°—æŒã¡ã§ã™ï¼‰"
        else:
            return ""
    
    def analyze_mood_trend(self, hours: int = 24) -> Dict[str, str]:
        """æ„Ÿæƒ…ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ."""
        cutoff = time.time() - (hours * 3600)
        recent_moods = [m for m in self.mood_history if m['timestamp'] > cutoff]
        
        if not recent_moods:
            return {"trend": "neutral", "description": "ãƒ‡ãƒ¼ã‚¿ä¸è¶³"}
        
        # æœ€é »æ„Ÿæƒ…
        dominant_emotions = [m['dominant'] for m in recent_moods]
        most_common = max(set(dominant_emotions), key=dominant_emotions.count)
        
        return {
            "trend": most_common,
            "description": f"éå»{hours}æ™‚é–“ã€{most_common}ãŒå„ªå‹¢",
            "sample_count": len(recent_moods)
        }
```

#### 4.2.3 APIè¿½åŠ 

```python
# api/routes/chat.py ã«è¿½åŠ 

from core.emotion import EmotionalState

# ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã”ã¨ã®æ„Ÿæƒ…çŠ¶æ…‹
character_emotions = {
    "lumina": EmotionalState("lumina"),
    "clarisse": EmotionalState("clarisse"),
    "nox": EmotionalState("nox")
}

@router.get("/api/v1/character/{name}/emotion")
async def get_character_emotion(
    name: str,
    current_user: User = Depends(get_current_user)
):
    """ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ„Ÿæƒ…çŠ¶æ…‹å–å¾—."""
    if name not in character_emotions:
        raise HTTPException(status_code=404, detail="Character not found")
    
    emotion_state = character_emotions[name]
    return {
        "character": name,
        "emotions": emotion_state.emotions,
        "dominant": emotion_state.get_dominant_emotion(),
        "mood_trend": emotion_state.analyze_mood_trend(hours=24),
        "modifier": emotion_state.generate_emotional_modifier()
    }
```

#### 4.2.4 ãƒ†ã‚¹ãƒˆï¼ˆ15ä»¶ï¼‰

```python
# tests/test_emotion.py

def test_emotional_state_init():
    """åˆæœŸåŒ–ãƒ†ã‚¹ãƒˆ."""
    state = EmotionalState("lumina")
    assert all(v == 0.5 for v in state.emotions.values())

def test_update_from_conversation():
    """æ„Ÿæƒ…æ›´æ–°ãƒ†ã‚¹ãƒˆ."""
    state = EmotionalState("lumina")
    state.update_from_conversation("ç´ æ™´ã‚‰ã—ã„ï¼", {})
    assert state.emotions['joy'] > 0.5

def test_decay_emotions():
    """æ¸›è¡°ãƒ†ã‚¹ãƒˆ."""
    state = EmotionalState("lumina")
    state.emotions['joy'] = 1.0
    state._decay_emotions(rate=0.1)
    assert state.emotions['joy'] < 1.0

def test_get_dominant_emotion():
    """æ”¯é…çš„æ„Ÿæƒ…ãƒ†ã‚¹ãƒˆ."""
    state = EmotionalState("lumina")
    state.emotions['anger'] = 0.9
    assert state.get_dominant_emotion() == 'anger'

def test_sentiment_analysis():
    """ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆåˆ†æãƒ†ã‚¹ãƒˆ."""
    state = EmotionalState("lumina")
    pos_score = state._analyze_sentiment("I love this!")
    neg_score = state._analyze_sentiment("I hate this!")
    assert pos_score > 0
    assert neg_score < 0

# ... ä»–10ä»¶ï¼ˆå±¥æ­´è¨˜éŒ²ã€ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã€ä¿®é£¾å­ç”Ÿæˆç­‰ï¼‰
```

---

## 5. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### 5.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ç”¨é€” |
|---------|------|------|
| **Framework** | React 18 + TypeScript | UIæ§‹ç¯‰ |
| **Build Tool** | Vite 5 | é«˜é€Ÿãƒ“ãƒ«ãƒ‰ |
| **Stateç®¡ç†** | Redux Toolkit | ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ |
| **HTTP Client** | Axios | REST APIé€šä¿¡ |
| **WebSocket** | socket.io-client | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ |
| **UI Library** | Tailwind CSS | ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° |
| **Chart** | Recharts | è¨˜æ†¶çµ±è¨ˆå¯è¦–åŒ– |
| **Testing** | Cypress + Vitest | E2E + Unit |

### 5.2 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆPart Bè¿½åŠ ï¼‰

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ç”¨é€” |
|---------|------|------|
| **Graph DB** | SQLiteï¼ˆå†å¸°CTEï¼‰ | é€£æƒ³è¨˜æ†¶ |
| **NLP** | TextBlob | æ„Ÿæƒ…åˆ†æ |

---

## 6. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### 6.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å…¨ä½“æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    React SPA (Port 3000)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ LoginPage  â”‚  â”‚ ChatPage   â”‚  â”‚ Dashboard  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚        â”‚               â”‚               â”‚                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚         Redux Store                          â”‚        â”‚
â”‚  â”‚  - authSlice (èªè¨¼çŠ¶æ…‹)                      â”‚        â”‚
â”‚  â”‚  - chatSlice (ä¼šè©±å±¥æ­´)                      â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚        â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  Services                           â”‚                 â”‚
â”‚  â”‚  - api.ts (Axios + JWT Interceptor)â”‚                 â”‚
â”‚  â”‚  - websocket.service.ts             â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€ REST: POST /api/v1/auth/login
         â”œâ”€ REST: GET /api/v1/chat/history
         â””â”€ WebSocket: /ws/chat
```

### 6.2 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ‹¡å¼µæ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               FastAPI Backend (Port 8000)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Phase 3 REST/WebSocket API                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚               â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Phase 1-3çµ±åˆã‚µãƒ¼ãƒ“ã‚¹                         â”‚    â”‚
â”‚  â”‚  - ChatService                                 â”‚    â”‚
â”‚  â”‚  - MemoryService                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚               â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Phase 4æ‹¡å¼µï¼ˆPart Bï¼‰                         â”‚    â”‚
â”‚  â”‚  - AssociativeMemory (SQLite Graph)            â”‚    â”‚
â”‚  â”‚  - EmotionalState (8æ„Ÿæƒ…ãƒ¢ãƒ‡ãƒ«)                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚               â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Phase 1 LangGraph Core                        â”‚    â”‚
â”‚  â”‚  - MultiLLMChat                                â”‚    â”‚
â”‚  â”‚  - MemoryManager (5éšå±¤)                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. ãƒ†ã‚¹ãƒˆè¨ˆç”»ï¼ˆTDDå®Ÿè£…ï¼‰

### 7.1 ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

| ã‚«ãƒ†ã‚´ãƒª | ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ†ã‚¹ãƒˆæ•° | ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™ | å„ªå…ˆåº¦ |
|---------|---------|---------|--------------|--------|
| **Part A: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** |
| API Client | `api.test.ts` | 15 | 95%ä»¥ä¸Š | ğŸ”´ High |
| èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ | `auth.service.test.ts` | 20 | 95%ä»¥ä¸Š | ğŸ”´ High |
| WebSocketã‚µãƒ¼ãƒ“ã‚¹ | `websocket.service.test.ts` | 15 | 90%ä»¥ä¸Š | ğŸ”´ High |
| Redux Auth Slice | `authSlice.test.ts` | 15 | 95%ä»¥ä¸Š | ğŸ”´ High |
| Redux Chat Slice | `chatSlice.test.ts` | 15 | 95%ä»¥ä¸Š | ğŸ”´ High |
| LoginPage | `LoginPage.test.tsx` | 10 | 90%ä»¥ä¸Š | ğŸ”´ High |
| ChatWindow | `ChatWindow.test.tsx` | 15 | 90%ä»¥ä¸Š | ğŸ”´ High |
| MemoryDashboard | `MemoryDashboard.test.tsx` | 10 | 85%ä»¥ä¸Š | ğŸŸ¡ Medium |
| **E2E (Cypress)** | `auth.cy.ts` | 10 | - | ğŸ”´ High |
| | `chat.cy.ts` | 10 | - | ğŸ”´ High |
| | `dashboard.cy.ts` | 5 | - | ğŸŸ¡ Medium |
| **Part B: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰** |
| é€£æƒ³è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ  | `test_associative_memory.py` | 30 | 95%ä»¥ä¸Š | ğŸŸ¡ Medium |
| æ„Ÿæƒ…ãƒ¢ãƒ‡ãƒ« | `test_emotion.py` | 20 | 95%ä»¥ä¸Š | ğŸŸ¡ Medium |
| é€£æƒ³è¨˜æ†¶API | `test_api_associative.py` | 15 | 90%ä»¥ä¸Š | ğŸŸ¡ Medium |
| æ„Ÿæƒ…API | `test_api_emotion.py` | 10 | 90%ä»¥ä¸Š | ğŸŸ¡ Medium |
| **åˆè¨ˆ** | **20ãƒ•ã‚¡ã‚¤ãƒ«** | **215** | **å¹³å‡90%ä»¥ä¸Š** | - |

### 7.2 ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ–¹æ³•

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆPart Aï¼‰

```bash
# Unitãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆVitestï¼‰
npm run test  # å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test:watch  # ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰
npm run test:coverage  # ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ã

# E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆCypressï¼‰
npm run test:e2e  # ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰
npm run test:e2e:open  # ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã®ã¿
npm run test -- api.test.ts
npm run test:e2e -- --spec "cypress/e2e/auth.cy.ts"
```

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆPart Bï¼‰

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest tests/test_associative_memory.py tests/test_emotion.py -v

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest tests/test_associative_memory.py --cov=memory.associative --cov-report=html

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã®ã¿
pytest tests/test_associative_memory.py::test_add_concept -v
```

---

## Part A: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£… - ãƒ†ã‚¹ãƒˆä»•æ§˜ï¼ˆTDDï¼‰

### Week 1: ReactåŸºç›¤ãƒ»èªè¨¼UI - ãƒ†ã‚¹ãƒˆä»•æ§˜

#### 1. API Client ãƒ†ã‚¹ãƒˆä»•æ§˜

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `src/services/__tests__/api.test.ts`

**ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹**: `ApiClientTest`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§ï¼ˆ15ä»¶ï¼‰**:

```typescript
describe('ApiClient', () => {
  describe('åˆæœŸåŒ–', () => {
    it('should create axios instance with correct base URL', () => {
      /**
       * Given: ç’°å¢ƒå¤‰æ•°ã§API_BASE_URLãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹
       * When: ApiClientã‚’åˆæœŸåŒ–
       * Then: axiosã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒæ­£ã—ã„baseURLã§ä½œæˆã•ã‚Œã‚‹
       */
      const client = new ApiClient();
      expect(client.client.defaults.baseURL).toBe('http://localhost:8000');
    });

    it('should set default timeout to 30000ms', () => {
      /**
       * Given: ApiClientã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
       * When: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šã‚’ç¢ºèª
       * Then: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãŒ30000msã«è¨­å®šã•ã‚Œã¦ã„ã‚‹
       */
      const client = new ApiClient();
      expect(client.client.defaults.timeout).toBe(30000);
    });
  });

  describe('ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼', () => {
    it('should add Authorization header when token exists', async () => {
      /**
       * Given: localStorageã«access_tokenãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹
       * When: APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
       * Then: Authorizationãƒ˜ãƒƒãƒ€ãƒ¼ã«Bearerãƒˆãƒ¼ã‚¯ãƒ³ãŒå«ã¾ã‚Œã‚‹
       */
      localStorage.setItem('access_token', 'test_token');
      const client = new ApiClient();
      
      // ãƒ¢ãƒƒã‚¯ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆ
      const interceptor = vi.fn();
      client.client.interceptors.request.use(interceptor);
      
      await client.client.get('/test');
      expect(interceptor).toHaveBeenCalled();
    });

    it('should not add Authorization header when token does not exist', async () => {
      /**
       * Given: localStorageã«access_tokenãŒä¿å­˜ã•ã‚Œã¦ã„ãªã„
       * When: APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
       * Then: Authorizationãƒ˜ãƒƒãƒ€ãƒ¼ãŒè¿½åŠ ã•ã‚Œãªã„
       */
      localStorage.removeItem('access_token');
      const client = new ApiClient();
      
      const interceptor = vi.fn();
      client.client.interceptors.request.use(interceptor);
      
      await client.client.get('/test');
      // ãƒˆãƒ¼ã‚¯ãƒ³ãŒãªã„å ´åˆã¯ãƒ˜ãƒƒãƒ€ãƒ¼ãŒè¿½åŠ ã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª
    });
  });

  describe('ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ã‚¿ãƒ¼', () => {
    it('should refresh token on 401 error', async () => {
      /**
       * Given: 401ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã€refresh_tokenãŒå­˜åœ¨ã™ã‚‹
       * When: APIãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹
       * Then: ãƒˆãƒ¼ã‚¯ãƒ³ãŒè‡ªå‹•æ›´æ–°ã•ã‚Œã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå†è©¦è¡Œã•ã‚Œã‚‹
       */
      // ãƒ¢ãƒƒã‚¯å®Ÿè£…
    });

    it('should logout on 401 error when refresh token is invalid', async () => {
      /**
       * Given: 401ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã€refresh_tokenãŒç„¡åŠ¹
       * When: APIãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹
       * Then: ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã‚‹
       */
      // ãƒ¢ãƒƒã‚¯å®Ÿè£…
    });
  });
});
```

#### 2. èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ ãƒ†ã‚¹ãƒˆä»•æ§˜

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `src/services/__tests__/auth.service.test.ts`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§ï¼ˆ20ä»¶ï¼‰**:

```typescript
describe('AuthService', () => {
  describe('register', () => {
    it('should register user successfully', async () => {
      /**
       * Given: æœ‰åŠ¹ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æƒ…å ±
       * When: register()ã‚’å‘¼ã³å‡ºã™
       * Then: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç™»éŒ²ã•ã‚Œã€user_idãŒè¿”ã•ã‚Œã‚‹
       */
      const mockResponse = { data: { user_id: 'user_123' } };
      vi.spyOn(apiClient, 'post').mockResolvedValue(mockResponse);
      
      const result = await authService.register({
        username: 'test_user',
        email: 'test@example.com',
        password: 'SecurePass123!'
      });
      
      expect(result.user_id).toBe('user_123');
      expect(apiClient.post).toHaveBeenCalledWith('/api/v1/auth/register', {
        username: 'test_user',
        email: 'test@example.com',
        password: 'SecurePass123!'
      });
    });

    it('should throw error on duplicate email', async () => {
      /**
       * Given: æ—¢å­˜ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
       * When: register()ã‚’å‘¼ã³å‡ºã™
       * Then: ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹
       */
      const mockError = { response: { status: 400, data: { detail: 'Email already exists' } } };
      vi.spyOn(apiClient, 'post').mockRejectedValue(mockError);
      
      await expect(authService.register({
        username: 'test_user',
        email: 'existing@example.com',
        password: 'SecurePass123!'
      })).rejects.toThrow();
    });
  });

  describe('login', () => {
    it('should login successfully and store tokens', async () => {
      /**
       * Given: æœ‰åŠ¹ãªèªè¨¼æƒ…å ±
       * When: login()ã‚’å‘¼ã³å‡ºã™
       * Then: ãƒˆãƒ¼ã‚¯ãƒ³ãŒlocalStorageã«ä¿å­˜ã•ã‚Œã‚‹
       */
      const mockResponse = {
        data: {
          access_token: 'access_token_123',
          refresh_token: 'refresh_token_123'
        }
      };
      vi.spyOn(apiClient, 'post').mockResolvedValue(mockResponse);
      
      await authService.login({
        email: 'test@example.com',
        password: 'SecurePass123!'
      });
      
      expect(localStorage.getItem('access_token')).toBe('access_token_123');
      expect(localStorage.getItem('refresh_token')).toBe('refresh_token_123');
    });

    it('should throw error on invalid credentials', async () => {
      /**
       * Given: ç„¡åŠ¹ãªèªè¨¼æƒ…å ±
       * When: login()ã‚’å‘¼ã³å‡ºã™
       * Then: ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹
       */
      const mockError = { response: { status: 401, data: { detail: 'Invalid credentials' } } };
      vi.spyOn(apiClient, 'post').mockRejectedValue(mockError);
      
      await expect(authService.login({
        email: 'test@example.com',
        password: 'WrongPassword'
      })).rejects.toThrow();
    });
  });

  describe('logout', () => {
    it('should remove tokens from localStorage', () => {
      /**
       * Given: localStorageã«ãƒˆãƒ¼ã‚¯ãƒ³ãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹
       * When: logout()ã‚’å‘¼ã³å‡ºã™
       * Then: ãƒˆãƒ¼ã‚¯ãƒ³ãŒå‰Šé™¤ã•ã‚Œã‚‹
       */
      localStorage.setItem('access_token', 'token');
      localStorage.setItem('refresh_token', 'refresh');
      
      authService.logout();
      
      expect(localStorage.getItem('access_token')).toBeNull();
      expect(localStorage.getItem('refresh_token')).toBeNull();
    });
  });

  describe('getProfile', () => {
    it('should fetch user profile', async () => {
      /**
       * Given: èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼
       * When: getProfile()ã‚’å‘¼ã³å‡ºã™
       * Then: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¿”ã•ã‚Œã‚‹
       */
      const mockProfile = {
        data: {
          user_id: 'user_123',
          username: 'test_user',
          email: 'test@example.com'
        }
      };
      vi.spyOn(apiClient, 'get').mockResolvedValue(mockProfile);
      
      const profile = await authService.getProfile();
      
      expect(profile.user_id).toBe('user_123');
      expect(apiClient.get).toHaveBeenCalledWith('/api/v1/auth/profile');
    });
  });

  describe('isAuthenticated', () => {
    it('should return true when token exists', () => {
      /**
       * Given: localStorageã«access_tokenãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹
       * When: isAuthenticated()ã‚’å‘¼ã³å‡ºã™
       * Then: trueãŒè¿”ã•ã‚Œã‚‹
       */
      localStorage.setItem('access_token', 'token');
      expect(authService.isAuthenticated()).toBe(true);
    });

    it('should return false when token does not exist', () => {
      /**
       * Given: localStorageã«access_tokenãŒä¿å­˜ã•ã‚Œã¦ã„ãªã„
       * When: isAuthenticated()ã‚’å‘¼ã³å‡ºã™
       * Then: falseãŒè¿”ã•ã‚Œã‚‹
       */
      localStorage.removeItem('access_token');
      expect(authService.isAuthenticated()).toBe(false);
    });
  });
});
```

#### 3. Redux Auth Slice ãƒ†ã‚¹ãƒˆä»•æ§˜

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `src/store/__tests__/authSlice.test.ts`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§ï¼ˆ15ä»¶ï¼‰**:

```typescript
describe('authSlice', () => {
  describe('loginAsync', () => {
    it('should handle login success', async () => {
      /**
       * Given: æœ‰åŠ¹ãªèªè¨¼æƒ…å ±
       * When: loginAsyncã‚’dispatch
       * Then: èªè¨¼çŠ¶æ…‹ãŒæ›´æ–°ã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒä¿å­˜ã•ã‚Œã‚‹
       */
      const store = configureStore({ reducer: { auth: authReducer } });
      const mockUser = { user_id: 'user_123', username: 'test_user' };
      
      vi.spyOn(authService, 'login').mockResolvedValue({
        access_token: 'token',
        refresh_token: 'refresh'
      });
      vi.spyOn(authService, 'getProfile').mockResolvedValue(mockUser);
      
      await store.dispatch(loginAsync({
        email: 'test@example.com',
        password: 'password'
      }));
      
      const state = store.getState().auth;
      expect(state.isAuthenticated).toBe(true);
      expect(state.user).toEqual(mockUser);
    });

    it('should handle login failure', async () => {
      /**
       * Given: ç„¡åŠ¹ãªèªè¨¼æƒ…å ±
       * When: loginAsyncã‚’dispatch
       * Then: ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ãŒè¨­å®šã•ã‚Œã‚‹
       */
      const store = configureStore({ reducer: { auth: authReducer } });
      
      vi.spyOn(authService, 'login').mockRejectedValue(new Error('Login failed'));
      
      await store.dispatch(loginAsync({
        email: 'test@example.com',
        password: 'wrong'
      }));
      
      const state = store.getState().auth;
      expect(state.error).toBeTruthy();
      expect(state.isAuthenticated).toBe(false);
    });
  });

  describe('logout', () => {
    it('should clear user state on logout', () => {
      /**
       * Given: èªè¨¼æ¸ˆã¿çŠ¶æ…‹
       * When: logoutã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’dispatch
       * Then: ãƒ¦ãƒ¼ã‚¶ãƒ¼çŠ¶æ…‹ãŒã‚¯ãƒªã‚¢ã•ã‚Œã‚‹
       */
      const store = configureStore({
        reducer: { auth: authReducer },
        preloadedState: {
          auth: {
            user: { user_id: 'user_123' },
            isAuthenticated: true,
            isLoading: false,
            error: null
          }
        }
      });
      
      store.dispatch(logout());
      
      const state = store.getState().auth;
      expect(state.user).toBeNull();
      expect(state.isAuthenticated).toBe(false);
    });
  });
});
```

### Week 2: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¼šè©±UI - ãƒ†ã‚¹ãƒˆä»•æ§˜

#### 1. WebSocketã‚µãƒ¼ãƒ“ã‚¹ ãƒ†ã‚¹ãƒˆä»•æ§˜

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `src/services/__tests__/websocket.service.test.ts`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§ï¼ˆ15ä»¶ï¼‰**:

```typescript
describe('WebSocketService', () => {
  describe('connect', () => {
    it('should establish WebSocket connection', () => {
      /**
       * Given: æœ‰åŠ¹ãªèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³
       * When: connect()ã‚’å‘¼ã³å‡ºã™
       * Then: WebSocketæ¥ç¶šãŒç¢ºç«‹ã•ã‚Œã‚‹
       */
      const service = new WebSocketService();
      const mockSocket = { on: vi.fn(), emit: vi.fn() };
      vi.spyOn(io, 'default').mockReturnValue(mockSocket as any);
      
      service.connect('test_token');
      
      expect(io.default).toHaveBeenCalledWith('ws://localhost:8000', {
        path: '/ws/chat',
        auth: { token: 'test_token' },
        transports: ['websocket']
      });
    });
  });

  describe('sendMessage', () => {
    it('should send message through WebSocket', () => {
      /**
       * Given: WebSocketæ¥ç¶šæ¸ˆã¿
       * When: sendMessage()ã‚’å‘¼ã³å‡ºã™
       * Then: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒWebSocketçµŒç”±ã§é€ä¿¡ã•ã‚Œã‚‹
       */
      const service = new WebSocketService();
      const mockSocket = { emit: vi.fn() };
      (service as any).socket = mockSocket;
      
      service.sendMessage('Hello', 'session_123');
      
      expect(mockSocket.emit).toHaveBeenCalledWith('chat', {
        type: 'chat',
        user_input: 'Hello',
        session_id: 'session_123'
      });
    });

    it('should not send message when socket is not connected', () => {
      /**
       * Given: WebSocketæœªæ¥ç¶š
       * When: sendMessage()ã‚’å‘¼ã³å‡ºã™
       * Then: ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãªã„ï¼ˆç„¡è¦–ã•ã‚Œã‚‹ï¼‰
       */
      const service = new WebSocketService();
      (service as any).socket = null;
      
      expect(() => {
        service.sendMessage('Hello', 'session_123');
      }).not.toThrow();
    });
  });

  describe('onMessage', () => {
    it('should register message handler', () => {
      /**
       * Given: WebSocketã‚µãƒ¼ãƒ“ã‚¹
       * When: onMessage()ã§ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ç™»éŒ²
       * Then: ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒç™»éŒ²ã•ã‚Œã‚‹
       */
      const service = new WebSocketService();
      const handler = vi.fn();
      
      service.onMessage(handler);
      
      // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡æ™‚ã«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒå‘¼ã°ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
      const mockData = { type: 'chunk', content: 'test' };
      (service as any).messageHandlers.forEach((h: any) => h(mockData));
      
      expect(handler).toHaveBeenCalledWith(mockData);
    });
  });

  describe('disconnect', () => {
    it('should disconnect WebSocket', () => {
      /**
       * Given: WebSocketæ¥ç¶šæ¸ˆã¿
       * When: disconnect()ã‚’å‘¼ã³å‡ºã™
       * Then: WebSocketæ¥ç¶šãŒåˆ‡æ–­ã•ã‚Œã‚‹
       */
      const service = new WebSocketService();
      const mockSocket = { disconnect: vi.fn() };
      (service as any).socket = mockSocket;
      
      service.disconnect();
      
      expect(mockSocket.disconnect).toHaveBeenCalled();
      expect((service as any).socket).toBeNull();
    });
  });
});
```

#### 2. ChatWindow ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ãƒ†ã‚¹ãƒˆä»•æ§˜

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `src/components/chat/__tests__/ChatWindow.test.tsx`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§ï¼ˆ15ä»¶ï¼‰**:

```typescript
describe('ChatWindow', () => {
  it('should render message list and input', () => {
    /**
     * Given: ChatWindowã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
     * When: ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
     * Then: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒˆã¨å…¥åŠ›æ¬„ãŒè¡¨ç¤ºã•ã‚Œã‚‹
     */
    render(<ChatWindow />);
    
    expect(screen.getByTestId('message-list')).toBeInTheDocument();
    expect(screen.getByTestId('message-input')).toBeInTheDocument();
  });

  it('should send message on submit', () => {
    /**
     * Given: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›æ¬„
     * When: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦é€ä¿¡
     * Then: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé€ä¿¡ã•ã‚Œã‚‹
     */
    const mockSendMessage = vi.fn();
    vi.spyOn(websocketService, 'sendMessage').mockImplementation(mockSendMessage);
    
    render(<ChatWindow />);
    
    const input = screen.getByTestId('message-input');
    fireEvent.change(input, { target: { value: 'Hello' } });
    fireEvent.click(screen.getByTestId('send-button'));
    
    expect(mockSendMessage).toHaveBeenCalledWith('Hello', expect.any(String));
  });

  it('should display typing indicator when receiving chunks', () => {
    /**
     * Given: WebSocketæ¥ç¶šæ¸ˆã¿
     * When: ãƒãƒ£ãƒ³ã‚¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡
     * Then: ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
     */
    render(<ChatWindow />);
    
    // WebSocketãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
    const mockHandler = (websocketService as any).messageHandlers[0];
    mockHandler({ type: 'chunk', content: 'test' });
    
    expect(screen.getByText('å…¥åŠ›ä¸­...')).toBeInTheDocument();
  });
});
```

### Week 3: è¨˜æ†¶ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - ãƒ†ã‚¹ãƒˆä»•æ§˜

#### MemoryDashboard ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ãƒ†ã‚¹ãƒˆä»•æ§˜

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `src/components/dashboard/__tests__/MemoryDashboard.test.tsx`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§ï¼ˆ10ä»¶ï¼‰**:

```typescript
describe('MemoryDashboard', () => {
  it('should fetch and display memory stats', async () => {
    /**
     * Given: è¨˜æ†¶çµ±è¨ˆAPI
     * When: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹
     * Then: è¨˜æ†¶çµ±è¨ˆãŒå–å¾—ã•ã‚Œã€è¡¨ç¤ºã•ã‚Œã‚‹
     */
    const mockStats = {
      total_memories: 100,
      by_layer: {
        short_term: 20,
        mid_term: 30,
        long_term: 50
      }
    };
    
    vi.spyOn(apiClient, 'get').mockResolvedValue({ data: mockStats });
    
    render(<MemoryDashboard />);
    
    await waitFor(() => {
      expect(screen.getByText('ç·è¨˜æ†¶æ•°')).toBeInTheDocument();
      expect(screen.getByText('100')).toBeInTheDocument();
    });
  });

  it('should display loading state initially', () => {
    /**
     * Given: è¨˜æ†¶çµ±è¨ˆAPIï¼ˆé…å»¶ï¼‰
     * When: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹
     * Then: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹
     */
    vi.spyOn(apiClient, 'get').mockImplementation(() => new Promise(() => {}));
    
    render(<MemoryDashboard />);
    
    expect(screen.getByText('Loading...')).toBeInTheDocument();
  });
});
```

### Week 4: E2Eãƒ†ã‚¹ãƒˆï¼ˆCypressï¼‰

#### èªè¨¼ãƒ•ãƒ­ãƒ¼ E2Eãƒ†ã‚¹ãƒˆ

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `cypress/e2e/auth.cy.ts`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§ï¼ˆ10ä»¶ï¼‰**:

```typescript
describe('èªè¨¼ãƒ•ãƒ­ãƒ¼', () => {
  it('should register new user successfully', () => {
    /**
     * Given: æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒšãƒ¼ã‚¸
     * When: æœ‰åŠ¹ãªæƒ…å ±ã‚’å…¥åŠ›ã—ã¦ç™»éŒ²
     * Then: ç™»éŒ²ãŒæˆåŠŸã—ã€ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã«ãªã‚‹
     */
    cy.visit('/register');
    cy.get('[data-testid="username-input"]').type('test_user');
    cy.get('[data-testid="email-input"]').type('test@example.com');
    cy.get('[data-testid="password-input"]').type('SecurePass123!');
    cy.get('[data-testid="register-button"]').click();
    
    cy.url().should('include', '/chat');
    cy.get('[data-testid="user-profile"]').should('contain', 'test_user');
  });

  it('should login successfully', () => {
    /**
     * Given: ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
     * When: æœ‰åŠ¹ãªèªè¨¼æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³
     * Then: ãƒ­ã‚°ã‚¤ãƒ³ãŒæˆåŠŸã—ã€ãƒãƒ£ãƒƒãƒˆãƒšãƒ¼ã‚¸ã«é·ç§»ã™ã‚‹
     */
    cy.visit('/login');
    cy.get('[data-testid="email-input"]').type('test@example.com');
    cy.get('[data-testid="password-input"]').type('SecurePass123!');
    cy.get('[data-testid="login-button"]').click();
    
    cy.url().should('include', '/chat');
  });

  it('should logout successfully', () => {
    /**
     * Given: ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿çŠ¶æ…‹
     * When: ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
     * Then: ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã•ã‚Œã€ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«é·ç§»ã™ã‚‹
     */
    cy.login('test@example.com', 'SecurePass123!');
    cy.visit('/chat');
    
    cy.get('[data-testid="logout-button"]').click();
    
    cy.url().should('include', '/login');
    cy.get('[data-testid="login-form"]').should('be.visible');
  });

  it('should show error on invalid login', () => {
    /**
     * Given: ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
     * When: ç„¡åŠ¹ãªèªè¨¼æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³
     * Then: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
     */
    cy.visit('/login');
    cy.get('[data-testid="email-input"]').type('wrong@example.com');
    cy.get('[data-testid="password-input"]').type('WrongPassword');
    cy.get('[data-testid="login-button"]').click();
    
    cy.get('[data-testid="error-message"]').should('be.visible');
    cy.get('[data-testid="error-message"]').should('contain', 'Invalid');
  });
});
```

#### ä¼šè©±ãƒ•ãƒ­ãƒ¼ E2Eãƒ†ã‚¹ãƒˆ

**ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `cypress/e2e/chat.cy.ts`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§ï¼ˆ10ä»¶ï¼‰**:

```typescript
describe('ä¼šè©±ãƒ•ãƒ­ãƒ¼', () => {
  beforeEach(() => {
    cy.login('test@example.com', 'SecurePass123!');
  });

  it('should send message and receive response', () => {
    /**
     * Given: ãƒãƒ£ãƒƒãƒˆãƒšãƒ¼ã‚¸
     * When: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦é€ä¿¡
     * Then: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã€å¿œç­”ãŒå—ä¿¡ã•ã‚Œã‚‹
     */
    cy.visit('/chat');
    
    cy.get('[data-testid="message-input"]').type('ã“ã‚“ã«ã¡ã¯');
    cy.get('[data-testid="send-button"]').click();
    
    cy.get('[data-testid="message-list"]').should('contain', 'ã“ã‚“ã«ã¡ã¯');
    
    // å¿œç­”ãŒå—ä¿¡ã•ã‚Œã‚‹ã¾ã§å¾…æ©Ÿ
    cy.wait(2000);
    cy.get('[data-testid="message-list"]').should('contain', 'assistant');
  });

  it('should display typing indicator during streaming', () => {
    /**
     * Given: ãƒãƒ£ãƒƒãƒˆãƒšãƒ¼ã‚¸
     * When: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡
     * Then: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ä¸­ã«ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
     */
    cy.visit('/chat');
    
    cy.get('[data-testid="message-input"]').type('Hello');
    cy.get('[data-testid="send-button"]').click();
    
    cy.get('[data-testid="typing-indicator"]').should('be.visible');
  });
});
```

---

## Part B: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é«˜åº¦æ©Ÿèƒ½ - ãƒ†ã‚¹ãƒˆä»•æ§˜ï¼ˆTDDï¼‰

### Week 5-6: é€£æƒ³è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ  - ãƒ†ã‚¹ãƒˆä»•æ§˜

#### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«: `tests/test_associative_memory.py`

**ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹**: `TestAssociativeMemory`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§ï¼ˆ30ä»¶ï¼‰**:

```python
class TestAssociativeMemory:
    """é€£æƒ³è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ†ã‚¹ãƒˆ"""
    
    def test_add_concept_success(self):
        """
        Given: æ¦‚å¿µåã€åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
        When: add_concept()ã‚’å‘¼ã³å‡ºã™
        Then: æ¦‚å¿µãŒè¿½åŠ ã•ã‚Œã€concept_idãŒè¿”ã•ã‚Œã‚‹
        """
        memory = AssociativeMemory(":memory:")
        concept_id = memory.add_concept(
            concept="Python",
            embedding=[0.1, 0.2, 0.3],
            metadata={"category": "programming"}
        )
        
        assert concept_id is not None
        assert isinstance(concept_id, str)
    
    def test_add_concept_duplicate(self):
        """
        Given: æ—¢å­˜ã®æ¦‚å¿µå
        When: add_concept()ã‚’å‘¼ã³å‡ºã™
        Then: ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ï¼ˆã¾ãŸã¯æ›´æ–°ã•ã‚Œã‚‹ï¼‰
        """
        memory = AssociativeMemory(":memory:")
        memory.add_concept("Python", [0.1], {})
        
        # å®Ÿè£…ã«å¿œã˜ã¦ã‚¨ãƒ©ãƒ¼ã¾ãŸã¯æ›´æ–°
        with pytest.raises(ValueError):
            memory.add_concept("Python", [0.2], {})
    
    def test_link_concepts_success(self):
        """
        Given: 2ã¤ã®æ¦‚å¿µã¨é–¢é€£ã‚¿ã‚¤ãƒ—
        When: link_concepts()ã‚’å‘¼ã³å‡ºã™
        Then: ã‚¨ãƒƒã‚¸ãŒä½œæˆã•ã‚Œã€edge_idãŒè¿”ã•ã‚Œã‚‹
        """
        memory = AssociativeMemory(":memory:")
        memory.add_concept("Python", [0.1], {})
        memory.add_concept("AI", [0.2], {})
        
        edge_id = memory.link_concepts(
            concept_a="Python",
            concept_b="AI",
            relationship_type="used_for",
            strength=0.9
        )
        
        assert edge_id is not None
    
    def test_link_concepts_nonexistent(self):
        """
        Given: å­˜åœ¨ã—ãªã„æ¦‚å¿µ
        When: link_concepts()ã‚’å‘¼ã³å‡ºã™
        Then: ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹
        """
        memory = AssociativeMemory(":memory:")
        
        with pytest.raises(ValueError):
            memory.link_concepts("Nonexistent", "AI", "related", 0.5)
    
    def test_retrieve_associated_concepts(self):
        """
        Given: ãƒˆãƒªã‚¬ãƒ¼æ¦‚å¿µã¨é–¢é€£æ¦‚å¿µ
        When: retrieve_associated_concepts()ã‚’å‘¼ã³å‡ºã™
        Then: é–¢é€£æ¦‚å¿µã®ãƒªã‚¹ãƒˆãŒè¿”ã•ã‚Œã‚‹
        """
        memory = AssociativeMemory(":memory:")
        memory.add_concept("Python", [0.1], {})
        memory.add_concept("AI", [0.2], {})
        memory.add_concept("Machine Learning", [0.3], {})
        
        memory.link_concepts("Python", "AI", "used_for", 0.9)
        memory.link_concepts("AI", "Machine Learning", "subset_of", 0.8)
        
        results = memory.retrieve_associated_concepts(
            trigger="Python",
            depth=2,
            threshold=0.5
        )
        
        assert len(results) >= 2
        assert any(r['name'] == 'AI' for r in results)
        assert any(r['name'] == 'Machine Learning' for r in results)
    
    def test_strengthen_association(self):
        """
        Given: æ—¢å­˜ã®é–¢é€£
        When: strengthen_association()ã‚’å‘¼ã³å‡ºã™
        Then: é–¢é€£ã®å¼·åº¦ãŒå¢—åŠ ã™ã‚‹ï¼ˆãƒ˜ãƒƒãƒ–ã®æ³•å‰‡ï¼‰
        """
        memory = AssociativeMemory(":memory:")
        memory.add_concept("A", [0.1], {})
        memory.add_concept("B", [0.2], {})
        memory.link_concepts("A", "B", "related", 0.5)
        
        initial_strength = memory.db.get_edge("A", "B")['strength']
        memory.strengthen_association("A", "B", delta=0.2)
        new_strength = memory.db.get_edge("A", "B")['strength']
        
        assert new_strength > initial_strength
        assert new_strength == pytest.approx(0.7, abs=0.01)
    
    def test_decay_inactive_associations(self):
        """
        Given: éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªé–¢é€£
        When: decay_inactive_associations()ã‚’å‘¼ã³å‡ºã™
        Then: é–¢é€£ã®å¼·åº¦ãŒæ¸›å°‘ã™ã‚‹ï¼ˆå¿˜å´æ›²ç·šï¼‰
        """
        memory = AssociativeMemory(":memory:")
        memory.add_concept("Old", [0.1], {})
        memory.add_concept("Forgotten", [0.2], {})
        memory.link_concepts("Old", "Forgotten", "weak", 0.2)
        
        # éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹ï¼ˆlast_activatedã‚’éå»ã«è¨­å®šï¼‰
        # ...
        
        decayed_count = memory.decay_inactive_associations(
            days_threshold=1,
            decay_rate=0.3
        )
        
        assert decayed_count >= 0
    
    def test_retrieve_with_depth_limit(self):
        """
        Given: å¤šéšå±¤ã®é–¢é€£
        When: retrieve_associated_concepts()ã‚’depthåˆ¶é™ä»˜ãã§å‘¼ã³å‡ºã™
        Then: æŒ‡å®šã•ã‚ŒãŸæ·±ã•ã¾ã§ã®é–¢é€£ã®ã¿ãŒè¿”ã•ã‚Œã‚‹
        """
        # å®Ÿè£…
        pass
    
    def test_retrieve_with_threshold(self):
        """
        Given: å¼·åº¦ã®ç•°ãªã‚‹é–¢é€£
        When: retrieve_associated_concepts()ã‚’thresholdä»˜ãã§å‘¼ã³å‡ºã™
        Then: é–¾å€¤ä»¥ä¸Šã®å¼·åº¦ã®é–¢é€£ã®ã¿ãŒè¿”ã•ã‚Œã‚‹
        """
        # å®Ÿè£…
        pass
    
    # ... ä»–20ä»¶ï¼ˆã‚°ãƒ©ãƒ•æ¢ç´¢ã€æœ€çŸ­ãƒ‘ã‚¹ã€æ„Ÿæƒ…è¨˜æ†¶ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ç­‰ï¼‰
```

### Week 7-8: æ„Ÿæƒ…ãƒ¢ãƒ‡ãƒ«åŸºç›¤ - ãƒ†ã‚¹ãƒˆä»•æ§˜

#### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«: `tests/test_emotion.py`

**ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹**: `TestEmotionalState`

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§ï¼ˆ20ä»¶ï¼‰**:

```python
class TestEmotionalState:
    """æ„Ÿæƒ…ãƒ¢ãƒ‡ãƒ«ã®ãƒ†ã‚¹ãƒˆ"""
    
    def test_emotional_state_init(self):
        """
        Given: ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å
        When: EmotionalStateã‚’åˆæœŸåŒ–
        Then: å…¨æ„Ÿæƒ…ãŒä¸­ç«‹å€¤0.5ã§åˆæœŸåŒ–ã•ã‚Œã‚‹
        """
        state = EmotionalState("lumina")
        
        assert all(v == 0.5 for v in state.emotions.values())
        assert len(state.emotions) == 8
        assert state.character_name == "lumina"
    
    def test_update_from_conversation_positive(self):
        """
        Given: ãƒã‚¸ãƒ†ã‚£ãƒ–ãªä¼šè©±å…¥åŠ›
        When: update_from_conversation()ã‚’å‘¼ã³å‡ºã™
        Then: å–œã³ã¨ä¿¡é ¼ã®æ„Ÿæƒ…ãŒå¢—åŠ ã™ã‚‹
        """
        state = EmotionalState("lumina")
        initial_joy = state.emotions['joy']
        initial_trust = state.emotions['trust']
        
        state.update_from_conversation("ç´ æ™´ã‚‰ã—ã„ï¼", {})
        
        assert state.emotions['joy'] > initial_joy
        assert state.emotions['trust'] > initial_trust
    
    def test_update_from_conversation_negative(self):
        """
        Given: ãƒã‚¬ãƒ†ã‚£ãƒ–ãªä¼šè©±å…¥åŠ›
        When: update_from_conversation()ã‚’å‘¼ã³å‡ºã™
        Then: æ‚²ã—ã¿ã®æ„Ÿæƒ…ãŒå¢—åŠ ã™ã‚‹
        """
        state = EmotionalState("lumina")
        initial_sadness = state.emotions['sadness']
        
        state.update_from_conversation("æœ€æ‚ªã ...", {})
        
        assert state.emotions['sadness'] > initial_sadness
    
    def test_decay_emotions(self):
        """
        Given: é«˜ã„æ„Ÿæƒ…å€¤
        When: _decay_emotions()ã‚’å‘¼ã³å‡ºã™
        Then: æ„Ÿæƒ…å€¤ãŒä¸­ç«‹å€¤0.5ã«å‘ã‹ã£ã¦æ¸›è¡°ã™ã‚‹
        """
        state = EmotionalState("lumina")
        state.emotions['joy'] = 1.0
        
        state._decay_emotions(rate=0.1)
        
        assert state.emotions['joy'] < 1.0
        assert state.emotions['joy'] >= 0.5
    
    def test_get_dominant_emotion(self):
        """
        Given: ç•°ãªã‚‹æ„Ÿæƒ…å€¤
        When: get_dominant_emotion()ã‚’å‘¼ã³å‡ºã™
        Then: æœ€ã‚‚é«˜ã„æ„Ÿæƒ…ãŒè¿”ã•ã‚Œã‚‹
        """
        state = EmotionalState("lumina")
        state.emotions['anger'] = 0.9
        state.emotions['joy'] = 0.6
        
        dominant = state.get_dominant_emotion()
        
        assert dominant == 'anger'
    
    def test_generate_emotional_modifier(self):
        """
        Given: é«˜ã„æ„Ÿæƒ…å¼·åº¦
        When: generate_emotional_modifier()ã‚’å‘¼ã³å‡ºã™
        Then: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¿®é£¾å­ãŒç”Ÿæˆã•ã‚Œã‚‹
        """
        state = EmotionalState("lumina")
        state.emotions['joy'] = 0.9
        
        modifier = state.generate_emotional_modifier()
        
        assert 'joy' in modifier.lower() or 'å–œã³' in modifier
    
    def test_analyze_mood_trend(self):
        """
        Given: æ„Ÿæƒ…å±¥æ­´
        When: analyze_mood_trend()ã‚’å‘¼ã³å‡ºã™
        Then: æ„Ÿæƒ…ãƒˆãƒ¬ãƒ³ãƒ‰ãŒåˆ†æã•ã‚Œã‚‹
        """
        state = EmotionalState("lumina")
        
        # å±¥æ­´ã‚’è¿½åŠ 
        for _ in range(10):
            state.update_from_conversation("æ¥½ã—ã„ï¼", {})
        
        trend = state.analyze_mood_trend(hours=24)
        
        assert 'trend' in trend
        assert 'description' in trend
    
    def test_sentiment_analysis_positive(self):
        """
        Given: ãƒã‚¸ãƒ†ã‚£ãƒ–ãªãƒ†ã‚­ã‚¹ãƒˆ
        When: _analyze_sentiment()ã‚’å‘¼ã³å‡ºã™
        Then: æ­£ã®ã‚¹ã‚³ã‚¢ãŒè¿”ã•ã‚Œã‚‹
        """
        state = EmotionalState("lumina")
        score = state._analyze_sentiment("I love this!")
        
        assert score > 0
    
    def test_sentiment_analysis_negative(self):
        """
        Given: ãƒã‚¬ãƒ†ã‚£ãƒ–ãªãƒ†ã‚­ã‚¹ãƒˆ
        When: _analyze_sentiment()ã‚’å‘¼ã³å‡ºã™
        Then: è² ã®ã‚¹ã‚³ã‚¢ãŒè¿”ã•ã‚Œã‚‹
        """
        state = EmotionalState("lumina")
        score = state._analyze_sentiment("I hate this!")
        
        assert score < 0
    
    # ... ä»–11ä»¶ï¼ˆå±¥æ­´è¨˜éŒ²ã€ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã€ä¿®é£¾å­ç”Ÿæˆç­‰ï¼‰
```

---

## ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ä»•æ§˜

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆVitestï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/__tests__/setup.ts`

```typescript
import { vi } from 'vitest';
import { cleanup } from '@testing-library/react';
import '@testing-library/jest-dom';

// å„ãƒ†ã‚¹ãƒˆå¾Œã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
afterEach(() => {
  cleanup();
  vi.clearAllMocks();
});

// localStorageãƒ¢ãƒƒã‚¯
Object.defineProperty(window, 'localStorage', {
  value: {
    getItem: vi.fn(),
    setItem: vi.fn(),
    removeItem: vi.fn(),
    clear: vi.fn(),
  },
  writable: true,
});

// WebSocketãƒ¢ãƒƒã‚¯
global.WebSocket = vi.fn() as any;
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆpytestï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `tests/conftest.py`ï¼ˆæ‹¡å¼µï¼‰

```python
import pytest
import tempfile
import os
from memory.associative import AssociativeMemory
from core.emotion import EmotionalState

@pytest.fixture
def temp_db():
    """ä¸€æ™‚çš„ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"""
    db_path = tempfile.mktemp(suffix='.db')
    yield db_path
    if os.path.exists(db_path):
        os.remove(db_path)

@pytest.fixture
def associative_memory(temp_db):
    """é€£æƒ³è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹"""
    return AssociativeMemory(temp_db)

@pytest.fixture
def emotional_state():
    """æ„Ÿæƒ…çŠ¶æ…‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹"""
    return EmotionalState("test_character")
```

---

## ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæˆ¦ç•¥

### TDDå®Ÿè£…é †åº

1. **Part A: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆWeek 1-4ï¼‰**
   - Week 1: API Clientãƒ†ã‚¹ãƒˆï¼ˆ15ä»¶ï¼‰â†’ å®Ÿè£… â†’ èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆ20ä»¶ï¼‰â†’ å®Ÿè£…
   - Week 2: WebSocketã‚µãƒ¼ãƒ“ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆ15ä»¶ï¼‰â†’ å®Ÿè£… â†’ ChatWindowãƒ†ã‚¹ãƒˆï¼ˆ15ä»¶ï¼‰â†’ å®Ÿè£…
   - Week 3: MemoryDashboardãƒ†ã‚¹ãƒˆï¼ˆ10ä»¶ï¼‰â†’ å®Ÿè£…
   - Week 4: E2Eãƒ†ã‚¹ãƒˆï¼ˆ25ä»¶ï¼‰â†’ çµ±åˆãƒ†ã‚¹ãƒˆãƒ»ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

2. **Part B: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆWeek 5-8ï¼‰**
   - Week 5-6: é€£æƒ³è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆï¼ˆ30ä»¶ï¼‰â†’ å®Ÿè£…
   - Week 7-8: æ„Ÿæƒ…ãƒ¢ãƒ‡ãƒ«ãƒ†ã‚¹ãƒˆï¼ˆ20ä»¶ï¼‰â†’ å®Ÿè£…

### ãƒ†ã‚¹ãƒˆå“è³ªåŸºæº–

**å¿…é ˆè¦ä»¶**:
- âœ… **ãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: 100%ï¼ˆå…¨215ä»¶ã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸï¼‰
- âœ… **ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸**: 90%ä»¥ä¸Šï¼ˆå¹³å‡ï¼‰
- âœ… **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰5åˆ†ä»¥å†…ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰3åˆ†ä»¥å†…
- âœ… **ãƒ†ã‚¹ãƒˆç‹¬ç«‹æ€§**: å„ãƒ†ã‚¹ãƒˆã¯ç‹¬ç«‹ã—ã¦å®Ÿè¡Œå¯èƒ½
- âœ… **ãƒ¢ãƒƒã‚¯ä½¿ç”¨**: å¤–éƒ¨ä¾å­˜ã¯100%ãƒ¢ãƒƒã‚¯ã§åˆ†é›¢

---

## 8. ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥

### 8.1 Docker Composeæ§‹æˆ

```yaml
version: '3.8'
services:
  frontend:
    build: ./frontend
    ports: ["3000:80"]
    environment:
      - VITE_API_BASE_URL=http://localhost:8000
    depends_on: [backend]

  backend:
    build: .
    ports: ["8000:8000"]
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/llm
      - REDIS_URL=redis://redis:6379
    depends_on: [db, redis]
    volumes:
      - ./memory:/app/memory  # é€£æƒ³è¨˜æ†¶DBæ°¸ç¶šåŒ–

  db:
    image: postgres:15
    volumes: [postgres_data:/var/lib/postgresql/data]

  redis:
    image: redis:7-alpine
    volumes: [redis_data:/data]

volumes:
  postgres_data:
  redis_data:
```

### 8.2 ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

```bash
# 1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ“ãƒ«ãƒ‰
cd frontend && npm run build

# 2. Docker Composeèµ·å‹•
docker-compose up -d

# 3. åˆæœŸåŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
docker-compose exec backend python -m scripts.init_db

# 4. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl http://localhost:8000/health
curl http://localhost:3000
```

---

## Phase 4 æˆæœç‰©ã¾ã¨ã‚

### Part A: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ï¼ˆWeek 1-4ï¼‰

**å®Ÿè£…ã‚³ãƒ¼ãƒ‰**:
- React SPA: ç´„3,000è¡Œï¼ˆTypeScriptï¼‰
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: 30å€‹
- ãƒšãƒ¼ã‚¸: 15ç”»é¢

**ãƒ†ã‚¹ãƒˆ**:
- Unit: 50ä»¶
- E2E: 20ä»¶

### Part B: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é«˜åº¦æ©Ÿèƒ½ï¼ˆWeek 5-8ï¼‰

**å®Ÿè£…ã‚³ãƒ¼ãƒ‰**:
- é€£æƒ³è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ : 400è¡Œï¼ˆPythonï¼‰
- æ„Ÿæƒ…ãƒ¢ãƒ‡ãƒ«: 300è¡Œï¼ˆPythonï¼‰
- **åˆè¨ˆ**: 700è¡Œ

**ãƒ†ã‚¹ãƒˆ**:
- é€£æƒ³è¨˜æ†¶: 20ä»¶
- æ„Ÿæƒ…ãƒ¢ãƒ‡ãƒ«: 15ä»¶
- **åˆè¨ˆ**: 35ä»¶

### ç·è¨ˆ

- **ã‚³ãƒ¼ãƒ‰**: 3,700è¡Œï¼ˆTS 3,000 + Py 700ï¼‰
- **ãƒ†ã‚¹ãƒˆ**: 215ä»¶ï¼ˆFE 150 + BE 65ï¼‰
- **æœŸé–“**: 8é€±é–“

---

## 9. Phase 4æˆåŠŸåŸºæº–

### TDDå®Ÿè£…ã®æˆåŠŸåŸºæº–

**å¿…é ˆè¦ä»¶**:
- âœ… **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**: å…¨æ©Ÿèƒ½ãŒãƒ†ã‚¹ãƒˆé§†å‹•ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
- âœ… **ãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: 100%ï¼ˆå…¨215ä»¶ã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸï¼‰
- âœ… **ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸**: 90%ä»¥ä¸Šï¼ˆå¹³å‡ï¼‰
- âœ… **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰5åˆ†ä»¥å†…ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰3åˆ†ä»¥å†…
- âœ… **ãƒ†ã‚¹ãƒˆç‹¬ç«‹æ€§**: å„ãƒ†ã‚¹ãƒˆã¯ç‹¬ç«‹ã—ã¦å®Ÿè¡Œå¯èƒ½
- âœ… **ãƒ¢ãƒƒã‚¯ä½¿ç”¨**: å¤–éƒ¨ä¾å­˜ã¯100%ãƒ¢ãƒƒã‚¯ã§åˆ†é›¢

**TDDã‚µã‚¤ã‚¯ãƒ«éµå®ˆ**:
- âœ… RED: å®Ÿè£…å‰ã«ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã„ã‚‹
- âœ… GREEN: æœ€å°é™ã®å®Ÿè£…ã§ãƒ†ã‚¹ãƒˆã‚’é€šã—ã¦ã„ã‚‹
- âœ… REFACTOR: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œã‚‚ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã—ã¦ã„ã‚‹

### å®šé‡ç›®æ¨™

| æŒ‡æ¨™ | ç›®æ¨™å€¤ | æ¸¬å®šæ–¹æ³• |
|------|--------|----------|
| **ãƒ†ã‚¹ãƒˆæˆåŠŸç‡** | **100%** | Vitest + pytestï¼ˆå…¨215ä»¶ï¼‰ |
| **ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸** | **90%ä»¥ä¸Š** | Vitest --coverage + pytest-cov |
| **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“** | **< 8åˆ†** | Vitest + pytest --durations |
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ“ãƒ«ãƒ‰æ™‚é–“ | < 30ç§’ | Vite build |
| E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ | < 5åˆ† | Cypress |
| APIå¿œç­”æ™‚é–“ | < 200ms | Locustè² è·ãƒ†ã‚¹ãƒˆ |

### å®šæ€§ç›®æ¨™

âœ… **TDDå®Ÿè£…å®Œäº†**: å…¨æ©Ÿèƒ½ãŒãƒ†ã‚¹ãƒˆé§†å‹•ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
âœ… **ãƒ†ã‚¹ãƒˆä»•æ§˜å®Œå‚™**: å…¨215ä»¶ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
âœ… **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Œå…¨å®Ÿè£…**: React SPA 15ç”»é¢ãƒ»30ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
âœ… **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ‹¡å¼µå®Œäº†**: é€£æƒ³è¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ ãƒ»æ„Ÿæƒ…ãƒ¢ãƒ‡ãƒ«å®Ÿè£…
âœ… **E2Eãƒ†ã‚¹ãƒˆå®Œå‚™**: Cypressãƒ†ã‚¹ãƒˆ25ä»¶
âœ… **ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™å®Œäº†**: Docker Composeæ§‹æˆæ•´å‚™

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—: Phase 5ä»¥é™

Phase 4å®Œäº†å¾Œã®å±•æœ›:

- **Phase 5**: å¯¾è©±ã‚¹ã‚¿ã‚¤ãƒ«é©å¿œãƒ»è‡ªå·±çœå¯Ÿï¼ˆ4é€±é–“ï¼‰
- **Phase 6**: ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æˆé•·ãƒ»MCPå¯¾å¿œï¼ˆ4é€±é–“ï¼‰
- **Phase 7**: 3Då¯è¦–åŒ–ãƒ»è‡ªå¾‹ã‚µãƒ¼ãƒï¼ˆ4é€±é–“ï¼‰
- **Phase 8**: LoRAãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ï¼ˆ3é€±é–“ï¼‰

**å‚ç…§**: `docks/å®Ÿè£…ä»•æ§˜/Phase4-8_å®Ÿè£…è¨ˆç”».md`